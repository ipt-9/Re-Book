<div class="browse-container">
  <app-navbar></app-navbar>

  <div class="main-content">
    <!-- üîç Search Bar -->
    <section class="search-bar">
      <h2>SEARCH PRODUCTS</h2>
      <div class="search-input">
        <input type="text" placeholder="Search" [(ngModel)]="searchTerm">
        <button class="search-button" (click)="onSearch()">üîç</button>
      </div>
    </section>

    <!-- üß† Filter -->
    <section class="filter-section">
      <h2>FILTER</h2>
      <div class="filter-container">
        <!-- Price Filter -->
        <div class="filter-group" [class.closed]="!isOpen('price')">
          <h3 (click)="toggle('price')">Price</h3>
          <div *ngIf="isOpen('price')" class="price-inputs">
            <span>CHF</span>
            <input
              type="number"
              placeholder="min"
              (input)="minPrice = parseFloat($any($event.target).value) || null"
            />
            <span>to</span>
            <span>CHF</span>
            <input
              type="number"
              placeholder="max"
              (input)="maxPrice = parseFloat($any($event.target).value) || null"
            />
          </div>
        </div>

        <!-- Category Filter -->
        <div class="filter-group" [class.closed]="!isOpen('category')">
          <h3 (click)="toggle('category')">Category</h3>
          <ul *ngIf="isOpen('category')">
            <li
              *ngFor="let cat of categories"
              [class.selected]="selectedCategory === cat"
              (click)="selectCategory(cat)"
            >
              {{ cat }}
            </li>
          </ul>
        </div>

        <!-- Subject Filter -->
        <div class="filter-group" [class.closed]="!isOpen('subject')">
          <h3 (click)="toggle('subject')">Subject</h3>
          <ul *ngIf="isOpen('subject')">
            <li
              *ngFor="let subj of ['Law', 'Economy', 'Finance', 'Language', 'Mathematics', 'Science', 'History']"
              [class.active]="selectedSubjects.includes(subj)"
              (click)="toggleSubject(subj)"
            >
              {{ subj }}
            </li>
          </ul>
        </div>
      </div>
    </section>

    <!-- üìö Book Display -->
    <section class="book-list">
      <div *ngFor="let book of filteredBooks()" routerLink="/product" class="book-item" [title]="book.title">
        <img [src]="book.image" [alt]="book.title">
        <h4>{{ book.title }}</h4>
        <p>{{ book.author }}</p>
        <strong *ngIf="book.price != null">CHF {{ book.price | number: '1.2-2' }}</strong>
      </div>
    </section>
  </div>

  <app-footer></app-footer>
</div>
